# Apache configuration for Django digiCells application
# Place this file in your Apache sites-available directory and enable it

<VirtualHost *:80>
    # Server configuration
    ServerName localhost
    ServerAlias www.localhost
    DocumentRoot /var/www/html
    
    # Django application configuration
    WSGIDaemonProcess digicells python-home=/path/to/your/venv python-path=/path/to/your/project
    WSGIProcessGroup digicells
    WSGIScriptAlias / /path/to/your/project/digiCells/digiCells/wsgi.py
    
    # Static files configuration
    Alias /static/ /path/to/your/project/staticfiles/
    <Directory /path/to/your/project/staticfiles>
        Require all granted
        # Cache static files for better performance
        ExpiresActive On
        ExpiresByType text/css "access plus 1 month"
        ExpiresByType application/javascript "access plus 1 month"
        ExpiresByType image/png "access plus 1 month"
        ExpiresByType image/jpg "access plus 1 month"
        ExpiresByType image/jpeg "access plus 1 month"
        ExpiresByType image/gif "access plus 1 month"
        ExpiresByType image/svg+xml "access plus 1 month"
    </Directory>
    
    # Media files configuration
    Alias /media/ /path/to/your/project/media/
    <Directory /path/to/your/project/media>
        Require all granted
        # Cache media files
        ExpiresActive On
        ExpiresByType image/png "access plus 1 month"
        ExpiresByType image/jpg "access plus 1 month"
        ExpiresByType image/jpeg "access plus 1 month"
        ExpiresByType image/gif "access plus 1 month"
        ExpiresByType application/pdf "access plus 1 month"
    </Directory>
    
    # WSGI application directory
    <Directory /path/to/your/project/digiCells>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>
    
    # Security headers
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/digicells_error.log
    CustomLog ${APACHE_LOG_DIR}/digicells_access.log combined
    
    # Performance settings
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/plain
        AddOutputFilterByType DEFLATE text/html
        AddOutputFilterByType DEFLATE text/xml
        AddOutputFilterByType DEFLATE text/css
        AddOutputFilterByType DEFLATE application/xml
        AddOutputFilterByType DEFLATE application/xhtml+xml
        AddOutputFilterByType DEFLATE application/rss+xml
        AddOutputFilterByType DEFLATE application/javascript
        AddOutputFilterByType DEFLATE application/x-javascript
    </IfModule>
    
    # File upload size limit
    LimitRequestBody 104857600  # 100MB
</VirtualHost>

# HTTPS configuration (uncomment and configure when using SSL)
# <VirtualHost *:443>
#     ServerName localhost
#     ServerAlias www.localhost
#     DocumentRoot /var/www/html
#     
#     # SSL Configuration
#     SSLEngine on
#     SSLCertificateFile /path/to/your/certificate.crt
#     SSLCertificateKeyFile /path/to/your/private.key
#     
#     # Same configuration as above but with HTTPS
#     WSGIDaemonProcess digicells python-home=/path/to/your/venv python-path=/path/to/your/project
#     WSGIProcessGroup digicells
#     WSGIScriptAlias / /path/to/your/project/digiCells/digiCells/wsgi.py
#     
#     # ... rest of the configuration same as above
# </VirtualHost>
